# ============================================
# WireGuard UI - Environment Configuration
# ============================================

# ----------------
# App Settings
# ----------------
APP_HOST=0.0.0.0
APP_PORT=8000
DEBUG=false

# ----------------
# Security
# ----------------
# REQUIRED: Generate a secure key with: openssl rand -hex 32
# This key is used for JWT tokens and encryption
# SECRET_KEY=your-secret-key-here-replace-me

# CSRF Protection (recommended for production with HTTPS)
# Set to true to enable CSRF token validation on state-changing requests
CSRF_PROTECTION_ENABLED=false

# ----------------
# Database
# ----------------
# SQLite database file location
DATABASE_URL=sqlite+aiosqlite:///./data/tunnbox.db

# ----------------
# WireGuard Settings
# ----------------
# REQUIRED: Your server's public IP address or domain name
# This is used as the endpoint for client configurations
WG_DEFAULT_ENDPOINT=YOUR_SERVER_IP

# Default DNS server for VPN clients
WG_DEFAULT_DNS=1.1.1.1

# Path to WireGuard configuration files
WG_CONFIG_PATH=/etc/wireguard

# Backend mode: auto, real, or mock
# auto = automatically detect (real on Linux, mock otherwise)
# real = use actual WireGuard commands (requires Linux)
# mock = use mock implementation (for development)
WG_BACKEND_MODE=auto

# Force userspace implementation (uncomment if needed for Docker/WSL2)
# WG_I_PREFER_BUGGY_USERSPACE_TO_POLISHED_KERNEL=1

# ----------------
# Authentication
# ----------------
# Access token expiration (in minutes)
ACCESS_TOKEN_EXPIRE_MINUTES=15

# Refresh token expiration (in days)
REFRESH_TOKEN_EXPIRE_DAYS=7

# JWT algorithm (HS256 recommended for single-server deployments)
ALGORITHM=HS256

# ----------------
# Security Settings
# ----------------
# SECURITY WARNING: PostUp/PostDown commands are executed as root
# Only enable if you trust all administrators with shell access
WG_ALLOW_CUSTOM_SCRIPTS=false

# Rate limiting
RATE_LIMIT_ENABLED=true

# For production with multiple workers, configure Redis for rate limiting
# RATE_LIMIT_REDIS_URL=redis://localhost:6379/0

# Trusted proxies for X-Forwarded-For header (comma-separated IPs)
# Configure if behind a reverse proxy (nginx, caddy, traefik)
# TRUSTED_PROXIES=127.0.0.1,172.17.0.1

# ----------------
# CORS Settings
# ----------------
# Allowed CORS origins (comma-separated URLs)
# Only needed if frontend is served from different domain
# CORS_ORIGINS=http://localhost:5173,http://127.0.0.1:5173

# ============================================
# Production Deployment Recommendations
# ============================================
#
# 1. Generate a strong SECRET_KEY:
#    openssl rand -hex 32
#
# 2. Set your server's public IP or domain:
#    WG_DEFAULT_ENDPOINT=vpn.yourdomain.com
#
# 3. Enable CSRF protection if using HTTPS:
#    CSRF_PROTECTION_ENABLED=true
#
# 4. Configure rate limiting with Redis for multiple workers:
#    RATE_LIMIT_REDIS_URL=redis://redis:6379/0
#
# 5. Set DEBUG=false in production
#
# 6. Use a reverse proxy (nginx/caddy) with HTTPS
#
# 7. Configure trusted proxies if behind reverse proxy:
#    TRUSTED_PROXIES=172.17.0.1
#
